
\[
\infer[\mc{AB} \bang p~\m{first}]
{\mc{AB} \Gamma, p_1, \Gamma''; \Delta_N; \Xi_N; \Gamma_{N1}; \Delta_{N1};
   \cdot; \bang p, \Omega; \cdot; \cdot; \Omega_N; \Delta_N \rightarrow \outsem}
{\begin{gathered}
   p_1, \Gamma'' \prec \bang p \\
   f = [\Gamma''; \Delta_N; \cdot; \bang p; \cdot; \Omega; \cdot; \cdot] \\
   \mc{AB} \Gamma, p_1, \Gamma''; \Delta_N; \Xi_N; \Gamma_{N1}; \Delta_{N1};
   \cdot; \Omega; \cdot; f;
   \Omega_N; \Delta_N \rightarrow \outsem
\end{gathered}
}
\]

\[
\infer[\mc{AB} \bang p~\m{on}~\bang q~\lstack{P}]
{\mc{AB} \Gamma, p_1, \Gamma''; \Delta_N; \Xi_N; \Gamma_{N1}; \Delta_{N1};
   \cdot; \bang p, \Omega; \cdot; f, \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem}
{
   \begin{gathered}
      p_1, \Gamma'' \prec \bang p \\
      f = [\Gamma_{old}; \Delta_N; \cdot; \bang q; \Omega_{old}; \cdot; \Upsilon] \\
      f' = [\Gamma''; \Delta_N; \cdot; \bang p; \cdot; \Omega; \cdot; q,
      \Upsilon] \\
      \mc{AB} \Gamma, p_1, \Gamma''; \Delta_N; \Xi_N; \Gamma_{N1}; \Delta_{N1};
      \cdot; \Omega; f', f, \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem
   \end{gathered}}
\]


\[
\infer[\mc{AB} \bang p~\m{on}~\bang q~\lstack{C}]
{\mc{AB} \Gamma, p_1, \Gamma''; \Delta; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi;
   \bang p, \Omega; f, \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem}
{
   \begin{gathered}
      p_1, \Gamma'' \prec \bang p \\
      f = [\Gamma_{old}; \Delta_{old}; \Xi_{old}; \bang q; \Omega_{old};
      \Lambda; \Upsilon] \\
      f' = [\Gamma''; \Delta; \Xi; \bang p; \cdot; \Omega; \Lambda; q, \Upsilon] \\
      \mc{AB} \Gamma,
      p_1, \Gamma''; \Delta; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi; \Omega; f', f,
      \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem
   \end{gathered}
}
\]


\[
\infer[\mc{AB} \bang p~\m{on}~q~\lstack{C}]
{\mc{AB} \Gamma, p_1, \Gamma''; \Delta; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi;
   \bang p, \Omega; f, \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem}
{
   \begin{gathered}
      p_1, \Gamma'' \prec \bang p \\
      f = (\Delta_{old}; \Delta'_{old}; \Xi_{old}; q; \Omega_{old}; \Lambda; \Upsilon) \\
      f' = [\Gamma''; \Delta; \Xi; \bang p; \cdot; \Omega; \Lambda, q; \Upsilon] \\
      \mc{AB} \Gamma, p_1, \Gamma''; \Delta; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi; \Omega;
      f', f, \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem
   \end{gathered}
}
\]

\[
\infer[\mc{AB} \bang p~\m{fail}]
{\mc \Gamma; \Delta; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi; \bang p, \Omega;
   \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem}
{\Gamma \npreceq \bang p & \contc{AB} \Gamma; \Delta_N; \Xi_N; \Gamma_{N1};
   \Delta_{N1}; \lstack{C}; \lstack{P}; \Omega_N \rightarrow \outsem}
\]
