
\[
\infer[\mc{AB} p~\m{first}]
{\mc{AB} \Gamma; \Delta, p_1, \Delta''; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \cdot; p,
   \Omega; \cdot; \cdot; \Omega_N; \Delta_N \rightarrow \outsem}
{
   \begin{gathered}
      p_1, \Delta'' \prec p \\
      \mc{AB} \Gamma; \Delta, \Delta''; \Xi_N; \Gamma_{N1};
      \Delta_{N1}; \Xi, p_1; \Omega; (\Delta, p_1; \Delta''; \cdot; p; \Omega;
            \cdot; \cdot); \cdot; \Omega_N; \Delta_N \rightarrow \outsem
   \end{gathered}}
\]

\[
\infer[\mc{AB} p~\m{on}~q]
{\mc{AB} \Gamma; \Delta, p_1, \Delta''; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi; p,
   \Omega; f, \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem}
{
   \begin{gathered}
      p_1, \Delta'' \prec p \\
      f = (\Delta_{old}; \Delta'_{old}; \Xi_{old}; q; \Omega_{old}; \Lambda; \Upsilon) \\
      f' = (\Delta, p_1; \Delta''; \Xi; p; \Omega; q, \Lambda; \Upsilon) \\
      \mc{AB} \Gamma; \Delta, \Delta''; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi, p_1; \Omega;
      f', f, \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem
   \end{gathered}
}
\]


\[
\infer[\mc{AB} p~\m{on}~\bang q~\lstack{C}]
{\mc{AB} \Gamma; \Delta, p_1, \Delta''; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi; p,
   \Omega; f, \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem}
{
   \begin{gathered}
      p_1, \Delta'' \prec p \\
      f = [\Gamma_{old}; \Delta_{old}; \Xi_{old}; q; \Omega_{old}; \Lambda; \Upsilon] \\
      f' = (\Delta, p_1; \Delta''; \Xi; p; \Omega; \Lambda; q, \Upsilon) \\
      \mc{AB} \Gamma; \Delta, \Delta''; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi,
      p_1; \Omega; f', f, \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem
   \end{gathered}
}
\]


\[
\infer[\mc{AB} p~\m{on}~\bang q~\lstack{P}]
{\mc{AB} \Gamma; \Delta, p_1, \Delta''; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \cdot; p,
   \Omega; \cdot; f, \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem}
{
   \begin{gathered}
      p_1, \Delta'' \prec p \\
      f = [\Gamma_{old}; \Delta_N; \cdot; q; \Omega_{old}; \cdot; \Upsilon]\\
      \Delta_N = \Delta, p_1, \Delta'' \\
      f' = (\Delta, p_1; \Delta''; \cdot; p; \Omega; \cdot; q, \Upsilon) \\
      \mc{AB} \Gamma; \Delta, \Delta''; \Xi_N; \Gamma_{N1}; \Delta_{N1}; p_1; \Omega;
         f'; f, \lstack{P};
         \Omega_N; \Delta_N \rightarrow \outsem
   \end{gathered}
}
\]


\[
\infer[\mc{AB} p~\m{fail}]
{\mc{AB} \Gamma; \Delta; \Xi_N; \Gamma_{N1}; \Delta_{N1}; \Xi; p, \Omega;
   \lstack{C}; \lstack{P}; \Omega_N; \Delta_N \rightarrow \outsem}
{\Delta \npreceq p & \contc \Gamma; \Delta_N; \Xi_N; \Gamma_{N1}; \Delta_{N1};
   \lstack{C}; \lstack{P}; \Omega_N \rightarrow \outsem}
\]
